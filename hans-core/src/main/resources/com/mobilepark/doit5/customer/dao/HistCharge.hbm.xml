<?xml version="1.0" encoding='utf-8'?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping>

    <sql-query name="searchCountByMonthly">
	<![CDATA[
		SELECT
			COUNT(*) 
  		 FROM TB_HIST_CHARGE
		WHERE USID = :usid
		  AND DATE_FORMAT(START_DT, '%Y-%m') >= :fromDate
		  AND DATE_FORMAT(START_DT, '%Y-%m') <= :toDate
		GROUP BY DATE_FORMAT(START_DT, '%Y-%m')
	]]>
    </sql-query>
    
    <sql-query name="searchByMonthly">
	<![CDATA[
		SELECT
			DATE_FORMAT(START_DT, '%Y-%m') MONTH,
			MAX(CUST_NAME) CUST_NAME,
			SUM(UNIX_TIMESTAMP(END_DT) - UNIX_TIMESTAMP(START_DT)) CHARGE_TIME,
			COUNT(CHARGER_ID) CHARGER_COUNT,
			SUM(CHARGE_AMT) CHARGE_AMT,
			SUM(CHARGE_FEE) CHARGE_FEE
  		 FROM TB_HIST_CHARGE
		WHERE USID = :usid
		  AND DATE_FORMAT(START_DT, '%Y-%m') >= :fromDate
		  AND DATE_FORMAT(START_DT, '%Y-%m') <= :toDate
		GROUP BY DATE_FORMAT(START_DT, '%Y-%m')
	]]>
    </sql-query>
    
</hibernate-mapping>