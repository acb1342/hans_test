<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mobilepark.doit5.admin.dao.CodeDaoMybatis">
	<!-- 신규 -->
		
	<select id="getCount" parameterType="java.util.Map" resultType="int">
	  SELECT  COUNT(*)
      	FROM TBL_COMMON_CODE
      	<where>
      		<if test="param.searchType != null">
	      		<choose>
	                <when test="param.searchType == 'id' ">
	                    AND CODE like  CONCAT('%',#{param.searchValue},'%')
	                </when>
	                <otherwise>
	                    AND CODE_NAME like  CONCAT('%',#{param.searchValue},'%')
	                </otherwise>
            	</choose>
			</if>
		</where>
	</select>
	
	
	<select id="getCodeList" parameterType="java.util.Map" resultType="java.util.Map">
	  SELECT CODE AS code
      			, PARENTS_CODE AS parentsCode
      			, CODE_NAME AS codeName
      			, CODE_DESCRIPT AS codeDesc
      	FROM TBL_COMMON_CODE
      	<where>
      		<if test="param.searchType != null">
	      		<choose>
	                <when test="param.searchType == 'id' ">
	                    AND CODE like  CONCAT('%',#{param.searchValue},'%')
	                </when>
	                <otherwise>
	                    AND CODE_NAME like  CONCAT('%',#{param.searchValue},'%')
	                </otherwise>
            	</choose>
			</if>
		</where>
		LIMIT #{param.startRow}, #{param.PerPage}	
	</select>
	
	<select id="getCodeDetail" parameterType="String" resultType="java.util.Map">
	  SELECT   CODE AS code
      			, PARENTS_CODE AS parentsCode
      			, CODE_NAME AS codeName
      			, CODE_DESCRIPT AS codeDesc
      			, REG_DATE as regDate
      	FROM TBL_COMMON_CODE
      	<where>
      		CODE = #{id}
		</where>
	</select>
	
	
	<update id="CodeUpdate" parameterType="java.util.Map">
	  update TBL_COMMON_CODE set
	    CODE_NAME = #{param.codeName},
	    CODE_DESCRIPT = #{param.codeDesc},
	    UPDATE_DATE = #{param.updateDate}
	  where CODE = #{param.id}
	</update>
	
	
	
	<insert id="CodeCreate" parameterType="java.util.Map">
	  insert into TBL_COMMON_CODE (CODE, PARENTS_CODE, CODE_NAME, CODE_DESCRIPT, REG_DATE)
	  values (#{param.id},#{param.parentsCode},#{param.codeName},#{param.codeDesc},#{param.regDate})
	</insert>
	
	<delete id="CodeDelete" parameterType="String">
	  delete from TBL_COMMON_CODE where CODE = #{id}
	</delete>
	
	
</mapper>